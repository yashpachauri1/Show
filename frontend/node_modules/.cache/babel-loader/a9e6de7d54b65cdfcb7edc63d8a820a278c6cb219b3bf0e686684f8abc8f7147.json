{"ast":null,"code":"var _jsxFileName = \"C:\\\\react\\\\TaskJob\\\\frontend\\\\src\\\\pages\\\\Auth.js\";\nimport { redirect } from \"react-router-dom\";\nimport AuthForm from \"../components/AuthForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Auth = () => {\n  return /*#__PURE__*/_jsxDEV(AuthForm, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 6,\n    columnNumber: 9\n  }, this);\n};\n_c = Auth;\nexport default Auth;\nexport async function action({\n  request\n}) {\n  const searchParams = new URL(request.url).searchParams;\n  const mode = searchParams.get('mode') || 'login';\n  const data = await request.formData();\n  let userData = {};\n  if (mode === 'signup') {\n    userData = {\n      name: data.get('name'),\n      email: data.get('email'),\n      password: data.get('password')\n    };\n  } else {\n    userData = {\n      email: data.get('email'),\n      password: data.get('password')\n    };\n  }\n  console.log(userData);\n  console.log(mode);\n  const response = await fetch(`http://localhost:5000/user/${mode}`, {\n    method: 'POST',\n    body: JSON.stringify(userData),\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  });\n  if (response.status === 422 || response.status === 401) {\n    console.log(response);\n    return response;\n  }\n  if (!resposnse.ok) {\n    console.log(response.error);\n    console.log('somthing went wrong');\n  }\n  const json = await response.json();\n  const token = json.token;\n  if (response.ok) {\n    localStorage.setItem('user', json);\n    console.log(json);\n    return redirect('/');\n  }\n}\nvar _c;\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"names":["redirect","AuthForm","jsxDEV","_jsxDEV","Auth","fileName","_jsxFileName","lineNumber","columnNumber","_c","action","request","searchParams","URL","url","mode","get","data","formData","userData","name","email","password","console","log","response","fetch","method","body","JSON","stringify","headers","status","resposnse","ok","error","json","token","localStorage","setItem","$RefreshReg$"],"sources":["C:/react/TaskJob/frontend/src/pages/Auth.js"],"sourcesContent":["import { redirect } from \"react-router-dom\";\r\nimport AuthForm from \"../components/AuthForm\";\r\n\r\nconst Auth = () => {\r\n    return (\r\n        <AuthForm />\r\n    )\r\n}\r\nexport default Auth;\r\n\r\nexport async function action({ request }) {\r\n    const searchParams = new URL(request.url).searchParams;\r\n    const mode = searchParams.get('mode') || 'login';\r\n\r\n\r\n    const data = await request.formData();\r\n    let userData = {}\r\n    if (mode === 'signup') {\r\n        userData = {\r\n            name: data.get('name'),\r\n            email: data.get('email'),\r\n            password: data.get('password')\r\n\r\n        }\r\n    }\r\n    else {\r\n        userData = {\r\n            email: data.get('email'),\r\n            password: data.get('password')\r\n        }\r\n    }\r\n    console.log(userData)\r\n    console.log(mode);\r\n\r\n    const response = await fetch(`http://localhost:5000/user/${mode}`, {\r\n        method: 'POST',\r\n        body: JSON.stringify(userData),\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        }\r\n    });\r\n\r\n    if (response.status === 422 || response.status === 401) {\r\n        console.log(response)\r\n        return response\r\n      }\r\n\r\n    if (!resposnse.ok) {\r\n        console.log(response.error);\r\n        console.log('somthing went wrong')\r\n    }\r\n    const json = await response.json();\r\n    const token = json.token;\r\n\r\n    if (response.ok) {\r\n        localStorage.setItem('user', json);\r\n        console.log(json)\r\n        return redirect('/')\r\n    }\r\n\r\n\r\n\r\n}"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,kBAAkB;AAC3C,OAAOC,QAAQ,MAAM,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9C,MAAMC,IAAI,GAAGA,CAAA,KAAM;EACf,oBACID,OAAA,CAACF,QAAQ;IAAAI,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AAEpB,CAAC;AAAAC,EAAA,GAJKL,IAAI;AAKV,eAAeA,IAAI;AAEnB,OAAO,eAAeM,MAAMA,CAAC;EAAEC;AAAQ,CAAC,EAAE;EACtC,MAAMC,YAAY,GAAG,IAAIC,GAAG,CAACF,OAAO,CAACG,GAAG,CAAC,CAACF,YAAY;EACtD,MAAMG,IAAI,GAAGH,YAAY,CAACI,GAAG,CAAC,MAAM,CAAC,IAAI,OAAO;EAGhD,MAAMC,IAAI,GAAG,MAAMN,OAAO,CAACO,QAAQ,CAAC,CAAC;EACrC,IAAIC,QAAQ,GAAG,CAAC,CAAC;EACjB,IAAIJ,IAAI,KAAK,QAAQ,EAAE;IACnBI,QAAQ,GAAG;MACPC,IAAI,EAAEH,IAAI,CAACD,GAAG,CAAC,MAAM,CAAC;MACtBK,KAAK,EAAEJ,IAAI,CAACD,GAAG,CAAC,OAAO,CAAC;MACxBM,QAAQ,EAAEL,IAAI,CAACD,GAAG,CAAC,UAAU;IAEjC,CAAC;EACL,CAAC,MACI;IACDG,QAAQ,GAAG;MACPE,KAAK,EAAEJ,IAAI,CAACD,GAAG,CAAC,OAAO,CAAC;MACxBM,QAAQ,EAAEL,IAAI,CAACD,GAAG,CAAC,UAAU;IACjC,CAAC;EACL;EACAO,OAAO,CAACC,GAAG,CAACL,QAAQ,CAAC;EACrBI,OAAO,CAACC,GAAG,CAACT,IAAI,CAAC;EAEjB,MAAMU,QAAQ,GAAG,MAAMC,KAAK,CAAE,8BAA6BX,IAAK,EAAC,EAAE;IAC/DY,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACX,QAAQ,CAAC;IAC9BY,OAAO,EAAE;MACL,cAAc,EAAE;IACpB;EACJ,CAAC,CAAC;EAEF,IAAIN,QAAQ,CAACO,MAAM,KAAK,GAAG,IAAIP,QAAQ,CAACO,MAAM,KAAK,GAAG,EAAE;IACpDT,OAAO,CAACC,GAAG,CAACC,QAAQ,CAAC;IACrB,OAAOA,QAAQ;EACjB;EAEF,IAAI,CAACQ,SAAS,CAACC,EAAE,EAAE;IACfX,OAAO,CAACC,GAAG,CAACC,QAAQ,CAACU,KAAK,CAAC;IAC3BZ,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;EACtC;EACA,MAAMY,IAAI,GAAG,MAAMX,QAAQ,CAACW,IAAI,CAAC,CAAC;EAClC,MAAMC,KAAK,GAAGD,IAAI,CAACC,KAAK;EAExB,IAAIZ,QAAQ,CAACS,EAAE,EAAE;IACbI,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEH,IAAI,CAAC;IAClCb,OAAO,CAACC,GAAG,CAACY,IAAI,CAAC;IACjB,OAAOpC,QAAQ,CAAC,GAAG,CAAC;EACxB;AAIJ;AAAC,IAAAS,EAAA;AAAA+B,YAAA,CAAA/B,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}